

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kubernetes &mdash; Mozhi 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato" type="text/css" />
  <link rel="stylesheet" href="../_static/css/vf_style.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

</head>

<body>
    <header>
        <div class="container">
            <a class="site-nav-toggle hidden-lg-up"><i class="icon-menu"></i></a>
            <a class="site-title" href="../index.html">
                Mozhi
            </a>
        </div>
    </header>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="../index.html">Docs</a></li>
        
      <li>Kubernetes</li>
    
    
      <li class="breadcrumbs-aside">
        
            
            <a href="../_sources/setup/kubernetes.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="../search.html" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Developers Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="on_minikune.html">Minikube</a></li>
<li class="toctree-l2"><a class="reference internal" href="prepare_data.html">Load and Prepare Demo Data for UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_machine.html">Setting up Developer Machine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="dev_machine.html#installations">Installations</a></li>
<li class="toctree-l3"><a class="reference internal" href="dev_machine.html#folder-structure">Folder Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api.html">mozhi API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api.html#setup-requirements">Setup Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#local-machine">Local Machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#docker">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#kubernetes">Kubernetes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ocr.html">OCR</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ocr.html#docker">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="ocr.html#models">Models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ui.html">mozhi UI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ui.html#setup-requirements">Setup Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="ui.html#local-machine">Local Machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="ui.html#docker">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="ui.html#kubernetes">Kubernetes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hf_model_training.html">Hugging Face Transformers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="hf_model_training.html#preparing-the-model">Preparing the model</a></li>
<li class="toctree-l3"><a class="reference internal" href="hf_model_training.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pt_model_training.html">Pytorch</a></li>
<li class="toctree-l2"><a class="reference internal" href="google_drive_fuse.html">Google Drive Fuse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../study_materials/study_materials.html">Mozhi Study Materials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../study_materials/dl.html">Deep Learning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../study_materials/dl.html#loss-functions">Loss Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../study_materials/model_serving.html">Model Serving</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../study_materials/model_serving.html#tensorflow-model-serving">Tensorflow Model Serving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../study_materials/model_serving.html#pytorch-serve">PyTorch Serve</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../study_materials/must_have_maths.html">Must Have</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../study_materials/must_have_maths.html#kl-divergence">KL Divergence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../study_materials/must_have_maths.html#cross-entorpy">Cross Entorpy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../study_materials/must_have_maths.html#residula-connection">Residula connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../study_materials/tf.html">Tensorflow Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../study_materials/transformers.html">Transformers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ner/ner.html">NER - Named Entity Recognition</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ner/ner.html#what-is-ner">What is NER?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ner/ner.html#use-cases-of-ner">Use cases of NER?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ner/ner.html#methods-to-extract-ner">Methods to extract NER</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ner/intro.html">NER - Named Entity Recognition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ner/datasets.html">NER Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ner/deeplearning.html">Deep Learning Approaches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ner/papers.html">Papers Related to NER</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ner/references.html">Wild References</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <div class="section" id="kubernetes">
<h1>Kubernetes<a class="headerlink" href="#kubernetes" title="Permalink to this headline">¶</a></h1>
<p>Kubernetes is an open-source container-orchestration system for automating deployment, scaling and management of
containerized applications.</p>
<p><a class="reference external" href="https://kubernetes.io/docs/tasks/tools/">Install instructions</a>.</p>
<p>Minikube is a tool that makes it easy to run Kubernetes locally. Minikube runs a single-node Kubernetes cluster
inside a VM on your laptop for users looking to try out Kubernetes or develop with it day-to-day.</p>
<p><strong>minikube (Linux)</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo apt-get install -y conntrack
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
sudo install minikube-linux-amd64 /usr/local/bin/minikube

export DRIVER=docker
minikube start --vm-driver=$(DRIVER) 
minikube stop

#to switch to minicube cluster context
kubectl config use-context minikube
kubectl get all -n kube-system

#enable ingress contoller
minikube addons enable ingress

minikube dashboard

kubectl delete all --all
</pre></div>
</div>
<p><strong>Change owner and group</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo chown -R $USER $HOME/.minikube
sudo chgrp -R $USER $HOME/.minikube
</pre></div>
</div>
<p><strong>Enable kubectl bash_completion</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kubectl</span> <span class="n">completion</span> <span class="n">bash</span> <span class="o">&gt;&gt;</span>  <span class="o">~/.</span><span class="n">bash_completion</span>
<span class="o">.</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">profile</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">bash_completion</span><span class="o">.</span><span class="n">sh</span>
<span class="o">.</span> <span class="o">~/.</span><span class="n">bash_completion</span>
</pre></div>
</div>
<p><a class="reference external" href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/">Cheat Sheet</a></p>
<p>Some common commands that are handy while working with kubernetes.</p>
<div class="highlight-shell script notranslate"><div class="highlight"><pre><span></span># starts the pods in yor machine
# docker, virtualbox,
export DRIVER=docker
minikube start --vm-driver=$(DRIVER) 
minikube stop


# list down all the pods 
kubectl get pods
# list all 
kubectl get all
# delete services
kubectl delete ${name from above list}
# eg:
kubectl delete deployment.apps/spacy-flask-ner-python

 
</pre></div>
</div>
<div class="section" id="api-quick-reference">
<h2>API Quick Reference<a class="headerlink" href="#api-quick-reference" title="Permalink to this headline">¶</a></h2>
<p>Here’s a brief explanation of the various fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>replicas – Tells Kubernetes how many pods to create during a deployment. Modifying this field is an easy way to scale a containerized application.
spec.strategy.type – Suppose there is another version of the application that needs to be deployed, and during the deployment phase, you need to update without facilitating an outage. The Rolling Update strategy allows Kubernetes to update a service without facilitating an outage by proceeding to update pods one at a time.
spec.strategy.rollingUpdate.maxUnavailable – The maximum number of pods that can be unavailable during the Rolling update.
spec.strategy.rollingUpdate.maxSurge – The maximum number of pods that can be scheduled above the desired number of pods.
spec.minReadySeconds – An optional Integer that describes the minimum number of seconds, for which a new pod should be ready without any of its containers crashing for it to be considered available.
spec.revisionHistoryLimit – An optional integer attribute that you can use to tell Kuberneres explicitly how many old ReplicaSets to retain at any given time.
spec.template.metadata.labels – Adds labels to a deployment specification.
spec.selector – An optional object that tells the Kubernetes deployment controller to only target pods that match the specified labels. Thus, to only target pods with the labels “app” and “deployer” you can make the following modification to our deployment yaml.
</pre></div>
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>https://medium.com/faun/how-to-restart-kubernetes-pod-7c702ca984c1</p></li>
<li><p><a class="reference external" href="https://medium.com/&#64;yzhong.cs/getting-started-with-kubernetes-and-docker-with-minikube-b413d4deeb92">https://medium.com/&#64;yzhong.cs/getting-started-with-kubernetes-and-docker-with-minikube-b413d4deeb92</a></p></li>
<li><p><a class="reference external" href="https://kubernetes.io/docs/concepts/services-networking/service/">https://kubernetes.io/docs/concepts/services-networking/service/</a></p></li>
<li><p><a class="reference external" href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">https://kubernetes.io/docs/concepts/workloads/controllers/deployment/</a></p></li>
<li><p><a class="reference external" href="https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/">https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/</a></p></li>
<li><p><a class="reference external" href="https://intellipaat.com/blog/tutorial/devops-tutorial/kubernetes-cheat-sheet/">https://intellipaat.com/blog/tutorial/devops-tutorial/kubernetes-cheat-sheet/</a></p></li>
<li><p><a class="reference external" href="(https://www.edureka.co/blog/kubernetes-architecture/)">Architecture</a></p></li>
<li><p><a class="reference external" href="https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl-on-linux">kubectl</a></p></li>
<li><p><a class="reference external" href="https://kubernetes.io/docs/tasks/tools/install-minikube/">Minikube</a></p></li>
<li><p><a class="reference external" href="https://minikube.sigs.k8s.io/docs/drivers/">Minikube Drivers</a></p>
<ul>
<li><p><a class="reference external" href="https://minikube.sigs.k8s.io/docs/drivers/docker/">Docker</a></p></li>
<li><p><a class="reference external" href="https://www.virtualbox.org/wiki/Linux_Downloads">Hypervisor VirtualBox</a></p>
<div class="highlight-shell script notranslate"><div class="highlight"><pre><span></span>    sudo apt-get install libqt5opengl5
    sudo dpkg -i virtualbox-6.1_6.1.6-137129~Ubuntu~bionic_amd64.deb
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><a class="reference external" href="https://www.mirantis.com/blog/introduction-to-yaml-creating-a-kubernetes-deployment/">Kubernetes YAML</a></p></li>
</ul>
</div>
</div>
</div>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; Copyright 2021, Mozhi.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.1.
        </div>
    </div>  

</body>
</html>